<!DOCTYPE html>
<html>
<head>
    <title>GiftsAds</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #000000;
            color: #808080;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 16px;
        }

        /* Минималистичные кнопки */
        .button {
            background: transparent;
            border: none;
            color: #808080;
            padding: 12px 0;
            width: 100%;
            text-align: left;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .button:hover {
            color: white;
        }

        /* Стиль для инпутов */
        input {
            background: #111111;
            border: none;
            color: white;
            padding: 12px;
            width: 100%;
            font-size: 16px;
            margin: 8px 0;
        }

        /* Баланс */
        .balance {
            font-size: 16px;
            color: #808080;
            margin-bottom: 16px;
            padding: 8px 0;
            border-bottom: 1px solid #222222;
        }

        /* Стрелка и иконки */
        .arrow {
            color: #555555;
            margin-right: 12px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div id="mainContent">
        <div class="balance">
            ⭐ <span id="balanceAmount">0 XTR</span>
        </div>

        <button class="button" onclick="addBalance()">
            <span class="arrow">├──</span>Пополнить баланс
        </button>
        <button class="button" onclick="startAnalysis()">
            <span class="arrow">├──</span>Запустить анализ
        </button>
        <button class="button" onclick="showMyStats()">
            <span class="arrow">├──</span>Моя статистика
        </button>
        <button class="button" onclick="showGlobalStats()">
            <span class="arrow">├──</span>Общая статистика
        </button>
        <button class="button" onclick="showSettings()">
            <span class="arrow">└──</span>Настройки
        </button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        tg.setHeaderColor('#000000');
        tg.setBackgroundColor('#000000');

        // Проверяем первый запуск
        if (!localStorage.getItem('agreementAccepted')) {
            showAgreement();
        }

        function showAgreement() {
            tg.showPopup({
                title: 'Соглашение',
                message: '├── Анализ активности пользователей\n' +
                        '├── Оплата через XTR\n' +
                        '├── Нет гарантии 100% подписки\n' +
                        '├── Комиссия без админки\n' +
                        '└── Оплата не возвращается',
                buttons: [
                    {id: 'decline', type: 'destructive', text: '← Отказаться'},
                    {id: 'accept', type: 'default', text: 'Принять →'}
                ]
            }).then((buttonId) => {
                if (buttonId === 'accept') {
                    localStorage.setItem('agreementAccepted', 'true');
                    showGroupSetup();
                } else {
                    tg.close();
                }
            });
        }

        function showGroupSetup() {
            tg.showPopup({
                title: 'Добавление группы',
                message: '├── Введите ссылку на группу\n' +
                        '└── Формат: @username',
                buttons: [
                    {id: 'skip', type: 'default', text: 'Пропустить →'},
                    {id: 'add', type: 'default', text: 'Добавить →'}
                ]
            });
        }

        // Остальные функции в том же стиле...
        function addBalance() {
            tg.showPopup({
                title: 'Пополнение',
                message: '├── 5 XTR\n├── 10 XTR\n├── 15 XTR\n└── Другая сумма',
                buttons: [
                    {id: '5', type: 'default', text: '5 XTR'},
                    {id: '10', type: 'default', text: '10 XTR'},
                    {id: '15', type: 'default', text: '15 XTR'},
                    {id: 'custom', type: 'default', text: '+ Другая сумма'}
                ]
            });
        }

        function startAnalysis() {
            tg.showPopup({
                title: 'Анализ группы',
                message: '└── Введите @username группы',
                buttons: [{id: 'start', type: 'default', text: 'Запустить →'}]
            });
        }

        function showMyStats() {
            tg.showPopup({
                title: 'Статистика',
                message: '├── Баланс: 0 XTR\n' +
                        '├── Подписчиков: 0\n' +
                        '└── Анализов: 0',
                buttons: [{id: 'refresh', type: 'default', text: 'Обновить →'}]
            });
        }

        function showGlobalStats() {
            tg.showPopup({
                title: 'Общая статистика',
                message: '├── Всего анализов: 0\n' +
                        '├── Групп: 0\n' +
                        '└── Успешность: 0%',
                buttons: [{id: 'refresh', type: 'default', text: 'Обновить →'}]
            });
        }

        function showSettings() {
            tg.showPopup({
                title: 'Настройки',
                message: '├── ID: -\n' +
                        '├── Группы: 0\n' +
                        '└── Уведомления: вкл',
                buttons: [
                    {id: 'groups', type: 'default', text: 'Группы →'},
                    {id: 'notifications', type: 'default', text: 'Уведомления →'}
                ]
            });
        }
    </script>
</body>
</html> 
