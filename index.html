<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Analytics</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'SF Pro Display', -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
        }

        .container {
            max-width: 100%;
            padding: 16px;
        }

        /* –°–æ–≥–ª–∞—à–µ–Ω–∏–µ */
        .agreement {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            padding: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .agreement-text {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 30px;
            color: #fff;
        }

        /* –ú–µ–Ω—é */
        .menu-item {
            background: #111;
            margin: 8px 0;
            padding: 16px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .menu-item:active {
            background: #222;
        }

        .menu-icon {
            margin-right: 12px;
            font-size: 20px;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-card {
            background: #111;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }

        .stats-number {
            font-size: 32px;
            font-weight: bold;
            margin: 8px 0;
        }

        .stats-label {
            color: #888;
            font-size: 14px;
        }

        /* –ê–Ω–∞–ª–∏–∑ */
        .analysis-input {
            background: #111;
            border: none;
            color: #fff;
            padding: 16px;
            border-radius: 12px;
            width: 100%;
            margin: 8px 0;
            font-size: 16px;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */
        .settings-section {
            background: #111;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .settings-title {
            font-size: 18px;
            margin-bottom: 12px;
            color: #888;
        }

        .button {
            background: #0088cc;
            color: #fff;
            border: none;
            padding: 16px;
            border-radius: 12px;
            width: 100%;
            font-size: 16px;
            margin: 8px 0;
            cursor: pointer;
            transition: background 0.2s;
        }

        .button:active {
            background: #006699;
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ */
        .switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
        }

        .switch-label {
            color: #fff;
        }

        /* –í–∫–ª–∞–¥–∫–∏ */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- –°–æ–≥–ª–∞—à–µ–Ω–∏–µ -->
    <div id="agreement" class="agreement">
        <div class="agreement-text">
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ:
            
            1. –ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø
            2. –í—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö
            3. –ö–æ–º–∏—Å—Å–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
            
            –ü—Ä–æ–¥–æ–ª–∂–∞—è, –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
        </div>
        <button class="button" onclick="acceptAgreement()">–ü—Ä–∏–Ω—è—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container" id="main-content" style="display: none;">
        <!-- –ú–µ–Ω—é -->
        <div id="menu" class="section active">
            <div class="menu-item" onclick="showSection('stats')">
                <div class="menu-icon">üìä</div>
                <div>–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            </div>
            <div class="menu-item" onclick="showSection('analysis')">
                <div class="menu-icon">üîç</div>
                <div>–ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞</div>
            </div>
            <div class="menu-item" onclick="showSection('settings')">
                <div class="menu-icon">‚öôÔ∏è</div>
                <div>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            </div>
            <div class="menu-item" onclick="showSection('faq')">
                <div class="menu-icon">‚ùì</div>
                <div>–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã</div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats" class="section">
            <div class="stats-card">
                <div class="stats-number">0</div>
                <div class="stats-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ</div>
            </div>
            <div class="stats-card">
                <div class="stats-number">0</div>
                <div class="stats-label">–ü–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>
            </div>
            <div class="stats-card">
                <div class="stats-number">0 TON</div>
                <div class="stats-label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
            </div>
            <button class="button" onclick="showSection('menu')">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ -->
        <div id="analysis" class="section">
            <input type="text" class="analysis-input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≥—Ä—É–ø–ø—É">
            <button class="button" onclick="analyzeGroup()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
            <div id="analysis-results" class="stats-card" style="display: none;">
                <div class="stats-number" id="potential-subs">0</div>
                <div class="stats-label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
            </div>
            <button class="button" onclick="showSection('settings')">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</button>
            <button class="button" onclick="showSection('menu')">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="settings" class="section">
            <div class="settings-section">
                <div class="settings-title">–í–∞—à–∞ –≥—Ä—É–ø–ø–∞</div>
                <input type="text" class="analysis-input" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à—É –≥—Ä—É–ø–ø—É">
                <button class="button" onclick="addBot()">–î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞</button>
            </div>

            <div class="settings-section">
                <div class="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏</div>
                <div class="switch">
                    <span class="switch-label">–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–∞—Ä–∫–∏</span>
                    <input type="checkbox" id="gifts-enabled" checked>
                </div>
                <select class="analysis-input" id="gift-type">
                    <option value="1">–ú–∞–ª–µ–Ω—å–∫–∏–π –ø–æ–¥–∞—Ä–æ–∫ (1 –∑–≤–µ–∑–¥–∞)</option>
                    <option value="3">–°—Ä–µ–¥–Ω–∏–π –ø–æ–¥–∞—Ä–æ–∫ (3 –∑–≤–µ–∑–¥—ã)</option>
                    <option value="5">–ë–æ–ª—å—à–æ–π –ø–æ–¥–∞—Ä–æ–∫ (5 –∑–≤–µ–∑–¥)</option>
                </select>
            </div>

            <div class="settings-section">
                <div class="settings-title">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                <textarea class="analysis-input" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"></textarea>
            </div>

            <button class="button" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="button" onclick="showSection('menu')">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- FAQ -->
        <div id="faq" class="section">
            <div class="settings-section">
                <div class="settings-title">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</div>
                <div class="stats-card">
                    <strong>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</strong>
                    <p>–ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞–∏–±–æ–ª–µ–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º.</p>
                </div>
                <div class="stats-card">
                    <strong>–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?</strong>
                    <p>–ö–æ–º–∏—Å—Å–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫. –° –±–æ—Ç–æ–º-–∞–¥–º–∏–Ω–æ–º –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ —É—Å–ø–µ—à–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏.</p>
                </div>
            </div>
            <button class="button" onclick="showSection('menu')">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ü—Ä–∏–Ω—è—Ç–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
        function acceptAgreement() {
            document.getElementById('agreement').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
        }

        // –ê–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø—ã
        function analyzeGroup() {
            const input = document.querySelector('.analysis-input').value;
            if (!input) {
                tg.showAlert('–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≥—Ä—É–ø–ø—É');
                return;
            }

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞–Ω–∞–ª–∏–∑
            tg.sendData(JSON.stringify({
                action: 'analyze_group',
                group_link: input
            }));
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
        function addBot() {
            const input = document.querySelector('.analysis-input').value;
            if (!input) {
                tg.showAlert('–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≥—Ä—É–ø–ø—É');
                return;
            }

            tg.sendData(JSON.stringify({
                action: 'add_bot',
                group_link: input
            }));
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function saveSettings() {
            const settings = {
                action: 'save_settings',
                gifts_enabled: document.getElementById('gifts-enabled').checked,
                gift_type: document.getElementById('gift-type').value,
                message: document.querySelector('textarea').value
            };

            tg.sendData(JSON.stringify(settings));
        }
    </script>
</body>
</html> 
